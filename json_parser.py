import json
import numpy as np
import pandas as pd
import csv
api_Calls = []
for i in range(1443,1444):

    try:
        path = "/opt/cuckoo/storage/analyses/"+ str(i) + "/reports/report.json"
	print(path)
	num = 1
        #path = "report" + str(i) + ".json"
        # path = "K:\analyses\analyses\" + str(i) + "\reports"
        with open(path) as read_file:
            data = json.load(read_file)
        #print(data["behavior"]["processes"][1]["calls"])
        eof = len(data["behavior"]["processes"][num]["calls"])
        TEMP = []
        for i in range(0,eof):
            TEMP.append(data["behavior"]["processes"][num]["calls"][i]["api"])
        TEMP = np.array(TEMP)
        TEMP = TEMP.reshape(1,eof)

        TEMP = pd.DataFrame(TEMP)
        TEMP.to_csv("test.csv", mode = "a", index = False, header = False)
    except:
        continue
# file = pd.read_csv("api.csv")
# file = file.replace('\n', '\n')
# file.to_csv("api.csv",index = False, header = False)
# /opt/cuckoo/storage/analyses/1/reports/report.json

